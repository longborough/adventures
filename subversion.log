# create subversion repository
svnadmin create ~/Development/Adventures/subversion.repository 
# create working copy via checkout
svn checkout --force file:///home/brent/Development/Adventures/subversion.repository ./subversion/
# build conventional svn folder structure
cd subversion
mkdir trunk branches tags
svn add *
# set up first (a) versions and commit
cp -v ~/Development/Adventures/reference/a.* trunk/
for n in trunk/a.* ; do mv -v $n ${n/a./} ; done
svn add trunk/*
svn commit -m "Initial checkin" 

# create c-branch and bring working copy up to date
svn copy file:///home/brent/Development/Adventures/subversion.repository/trunk file:///home/brent/Development/Adventures/subversion.repository/branches/cbranch -m "Created branch for (c)"
svn update

# make changes (a) to (b1)
cp -v ~/Development/Adventures/reference/b1.* trunk/
for n in trunk/b1.* ; do mv -fv $n ${n/b1./} ; done
svn commit -m "Changed (a) -> (b1)"

# make changes (b1) to (b2)
cp -v ~/Development/Adventures/reference/b2.* trunk/
for n in trunk/b2.* ; do mv -fv $n ${n/b2./} ; done
svn commit -m "Changed (b1) -> (b2)"

# save a copy of the trunk (b2) as bbranch
svn copy file:///home/brent/Development/Adventures/subversion.repository/trunk file:///home/brent/Development/Adventures/subversion.repository/branches/bbranch -m "Created branch for (b2)"
svn update

# make changes (a) to (c1)
cp -v ~/Development/Adventures/reference/c1.* branches/cbranch/
for n in branches/cbranch/c1.* ; do mv -fv $n ${n/c1./} ; done
svn commit -m "Changed (a) -> (c1) - in cbranch"

# merge cbranch @ (c1) -> trunk @ (b2)  
cd trunk/
svn merge file:///home/brent/Development/Adventures/subversion.repository/branches/cbranch
svn cleanup
cd ../

# merge bbranch @ (b2) -> cbranch @ (c1)  
cd branches/cbranch/
svn merge file:///home/brent/Development/Adventures/subversion.repository/branches/bbranch
svn cleanup
cd ../..

# compare to reference material
cd ..
sha1sum reference/*{3way,darcs}* subversion/{trunk,branches/cbranch}/*c* > subversion.sha1

# final commit
svn update subversion/
svn commit -m "Final commit of merged branches" subversion/

